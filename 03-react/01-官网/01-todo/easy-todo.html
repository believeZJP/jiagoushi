<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>todo</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
</head>

<body>
    <div id="app">

    </div>
    <script type="text/babel">
    
        class TodoApp extends React.Component{
            constructor(props){
                super(props)
                this.state={
                    item:[],
                    inputValue:''
                }
            }
            handleChange=(e)=>{
                console.log(e.target);
                this.setState({
                        inputValue:e.target.value
                })
            }
            handleSumbmit=(e)=>{
                e.preventDefault();
                if(!this.state.inputValue) {return}
                console.log(111);
                const newItem={
                    inputValue:this.state.inputValue,
                    id:Date.now()
                }
                this.setState(state=>({
                    item:state.item.concat(newItem),
                    inputValue:''
                }))
                
            }
            render(){
                return (
                    <div>
                        <h3>easy Todo</h3>
                        <Todolist items={this.state.item}></Todolist>
                        <form onSubmit={this.handleSumbmit}>
                        <label htmlFor="todo">
                            what needs to be done?
                        </label>
                        <br/>
                        <input type="text" id='todo' onChange={this.handleChange} value={this.state.inputValue}/>
                        <button>添加第{this.state.item.length+1}个</button>
                        </form>
                    </div>
                )
            }
        }
    class Todolist extends React.Component{
        render(){
        return (
            <ul>
            {
                this.props.items.map(item=>
                {
               return <li key={item.id}>{item.inputValue} </li>
                }
                )
            }
            </ul>
        )
    }
            }
        ReactDOM.render(
            <TodoApp/>,document.getElementById('app')
        )
        
        </script>
</body>

</html>